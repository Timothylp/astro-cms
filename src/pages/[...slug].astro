---
import { prisma } from "../db";
import FrontLayout from "../layouts/FrontLayout.astro";

// For static output
// export async function getStaticPaths() {
//   const pageEntries = await getCollection("pages");

//   return pageEntries.map((entry) => ({
//     params: { slug: entry.slug },
//     props: { entry },
//   }));
// }

// For dynamic output
const { slug } = Astro.params;
if(!slug) return Astro.redirect("/404");

const page = await prisma.post.findUnique({ where: { slug } });
if(!page) return Astro.redirect("/404");
---

<FrontLayout title={page.title}>
  <h2>{page.title}</h2>
</FrontLayout>
